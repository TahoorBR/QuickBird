# QuickBird Deployment Guide

This guide covers deploying QuickBird to **Vercel** (frontend) and **Render** (backend + database).

## Prerequisites

- GitHub account
- Vercel account (free tier available)
- Render account (free tier available)
- OpenAI API key

## üéØ Quick Start

1. **Backend First**: Deploy backend to Render
2. **Frontend Second**: Deploy frontend to Vercel with backend URL
3. **Test**: Verify both services work together

---

## üöÄ Backend Deployment (Render)

### Step 1: Create Backend Service

1. Go to [Render Dashboard](https://dashboard.render.com)
2. Click **"New +"** ‚Üí **"Web Service"**
3. Connect your GitHub repository
4. Configure the service:
   - **Name**: `quickbird-backend`
   - **Environment**: `Python 3`
   - **Root Directory**: `backend`
   - **Build Command**: `pip install -r requirements.txt && alembic upgrade head`
   - **Start Command**: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`

### Step 2: Create Database

1. In Render Dashboard, click **"New +"** ‚Üí **"PostgreSQL"**
2. Configure:
   - **Name**: `quickbird-db`
   - **Database**: `quickbird`
   - **User**: `quickbird`
   - **Plan**: Free

### Step 3: Environment Variables

Add these in your backend service settings:

```
DATABASE_URL=<auto-generated-from-postgres>
OPENAI_API_KEY=your-openai-api-key-here
SECRET_KEY=generate-a-random-secret-key
PYTHON_VERSION=3.11.0
ENVIRONMENT=production
```

### Step 4: Deploy

1. Click **"Create Web Service"**
2. Wait for deployment to complete
3. Note your backend URL: `https://quickbird-backend.onrender.com`

---

## üåê Frontend Deployment (Vercel)

### Step 1: Create Frontend Project

1. Go to [Vercel Dashboard](https://vercel.com/dashboard)
2. Click **"New Project"**
3. Import your GitHub repository
4. Configure:
   - **Framework Preset**: `Next.js`
   - **Root Directory**: `frontend`
   - **Build Command**: `npm run build`
   - **Output Directory**: `.next`

### Step 2: Environment Variables

Add these in your Vercel project settings:

```
NEXT_PUBLIC_API_URL=https://quickbird-backend.onrender.com
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=your-stripe-key (optional)
NEXT_PUBLIC_APP_URL=https://your-frontend-url.vercel.app
```

### Step 3: Deploy

1. Click **"Deploy"**
2. Wait for deployment to complete
3. Your app will be available at: `https://your-project.vercel.app`

---

## üîß Local Development

### Backend Setup

```bash
cd backend
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

### Frontend Setup

```bash
cd frontend
npm install
npm run dev
```

---

## üìã Environment Variables Reference

### Backend (.env)
```env
DATABASE_URL=postgresql://user:password@host:port/database
OPENAI_API_KEY=sk-your-openai-key
SECRET_KEY=your-secret-key-here
ENVIRONMENT=development
```

### Frontend (.env.local)
```env
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

---

## üõ†Ô∏è Build Scripts

### Frontend Build
```bash
cd frontend
chmod +x build.sh
./build.sh
```

### Backend Build
```bash
cd backend
chmod +x build.sh
./build.sh
```

---

## üîç Troubleshooting

### Common Issues

1. **CORS Errors**
   - Check backend CORS settings in `app/main.py`
   - Ensure frontend URL is allowed

2. **Database Connection**
   - Verify `DATABASE_URL` is correct
   - Check if database service is running

3. **Build Failures**
   - Check build logs in Vercel/Render dashboard
   - Ensure all dependencies are installed

4. **API Key Issues**
   - Verify OpenAI API key is valid
   - Check if API key has sufficient credits

### Logs

- **Vercel**: Function logs in project dashboard
- **Render**: Service logs in web service dashboard

---

## üìä Monitoring

### Vercel
- Function execution logs
- Performance metrics
- Error tracking

### Render
- Service uptime
- Resource usage
- Application logs

---

## üîí Security Checklist

- [ ] Environment variables are not committed to Git
- [ ] API keys are rotated regularly
- [ ] Database uses strong passwords
- [ ] HTTPS is enabled (automatic on Vercel/Render)
- [ ] CORS is properly configured

---

## üöÄ Scaling

### Render (Backend)
- Upgrade to paid plans for better performance
- Add Redis for caching
- Use multiple instances

### Vercel (Frontend)
- Upgrade to Pro plan for better performance
- Use Edge Functions for global distribution
- Enable CDN for static assets

---

## üìû Support

If you encounter issues:

1. Check the logs in both Vercel and Render dashboards
2. Verify all environment variables are set correctly
3. Ensure both services are running and accessible
4. Test the API endpoints directly

**Happy Deploying! üéâ**
